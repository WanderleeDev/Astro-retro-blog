---
import { Image, Picture } from 'astro:assets'
//  layout
import BaseLayout from './BaseLayout.astro'
//  components
import OpinionSolicitation from '../shared/OpinionSolicitation.astro'
import Starrating from '../shared/StarRating.astro'
import CommentBox from '../components/CommentBox/CommentBox.astro'

const { frontmatter } = Astro.props
---

<BaseLayout pageTitle={frontmatter.title}>
  <header>
    <h1 class="post-title" style={{color: frontmatter.color}}>
      {frontmatter.title}
    </h1>
    <div class="img-wrapper">
      <Picture 
        src={frontmatter.image.url} 
        formats={['avif', 'webp']}
        widths={[240, 540, 720]}
        sizes={`
          (max-width: 360px) 240px, 
          (max-width: 720px) 540px, 
          (max-width: 1600px) 720px
          `} 
        alt={frontmatter.image.alt}
        width='100%'
        height='100%' 
      />
    </div>
    <p>
      {frontmatter.description}
    </p>
  </header>

  <div class="nes-container is-rounded is-dark ">
    <slot />
  </div>
  
  <footer class="post-footer">
    <div>
      <p class="data-time">
        Publicado: 
        <time datetime={frontmatter.date.slice(0,10)}>{frontmatter.date.slice(0,10)}</time>
      </p>
      <p class="">
        Autor: {frontmatter.author}
      </p>
    </div>

    <Starrating />
  </footer>

  <OpinionSolicitation />

  <CommentBox />

</BaseLayout>

<style>
  .post-title {
    font-weight: 700;
    font-size: clamp(1.2rem, 3vw ,2.5rem);
  }

  .post-footer{
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-block: 2rem;
    font-size: .7rem;
  }

  .img-wrapper{
    max-width: 40rem;
  }
</style>
